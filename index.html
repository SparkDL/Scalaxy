<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Scalaxy : Compiler plugin goodies for Scala (continuation of non-OpenCL part of ScalaCL)" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Scalaxy</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/ochafik/Scalaxy">View on GitHub</a>

          <h1 id="project_title">Scalaxy</h1>
          <h2 id="project_tagline">Compiler plugin goodies for Scala (continuation of non-OpenCL part of ScalaCL)</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/ochafik/Scalaxy/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/ochafik/Scalaxy/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <p>Collection of Scala Macro goodies (<a href="https://github.com/ochafik/Scalaxy/blob/master/LICENSE">BSD-licensed</a>)</p>

<ul>
<li>
<p><em><a href="https://github.com/ochafik/Scalaxy/tree/master/Loops">Loops</a></em> (<a href="http://ochafik.github.io/Scalaxy/Loops/latest/api/index.html">ScalaDoc</a>) provide a macro that optimizes simple foreach loops by rewriting them to an equivalent while loop:</p>

<div class="highlight"><pre><span class="k">import</span> <span class="nn">scalaxy.loops._</span>

<span class="k">for</span> <span class="o">(</span><span class="n">i</span> <span class="k">&lt;-</span> <span class="mi">0</span> <span class="n">until</span> <span class="mi">100000000</span> <span class="n">optimized</span><span class="o">)</span> <span class="o">{</span> <span class="o">...</span> <span class="o">}</span>
</pre></div>
</li>
<li>
<p><em><a href="https://github.com/ochafik/Scalaxy/tree/master/Reified">Reified</a></em> (<a href="http://ochafik.github.io/Scalaxy/Reified/latest/api/index.html">ScalaDoc</a>) provides a powerful reified values mechanism that deals well with composition and captures of runtime values, allowing for complex ASTs to be generated during runtime for re-compilation or transformation purposes. It preserves the original value that was reified, allowing for flexible mixed usage of runtime value and compile-time AST.</p>

<div class="highlight"><pre><span class="k">import</span> <span class="nn">scalaxy.reified._</span>

<span class="k">def</span> <span class="n">comp</span><span class="o">(</span><span class="n">capture1</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span><span class="k">:</span> <span class="kt">ReifiedFunction1</span><span class="o">[</span><span class="kt">Int</span>, <span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="o">{</span>
  <span class="k">val</span> <span class="n">capture2</span> <span class="k">=</span> <span class="nc">Seq</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span> <span class="mi">20</span><span class="o">,</span> <span class="mi">30</span><span class="o">)</span>
  <span class="k">val</span> <span class="n">f</span> <span class="k">=</span> <span class="n">reify</span><span class="o">((</span><span class="n">x</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">capture1</span> <span class="o">+</span> <span class="n">capture2</span><span class="o">(</span><span class="n">x</span><span class="o">))</span>
  <span class="k">val</span> <span class="n">g</span> <span class="k">=</span> <span class="n">reify</span><span class="o">((</span><span class="n">x</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span><span class="o">)</span>

  <span class="n">g</span><span class="o">.</span><span class="n">compose</span><span class="o">(</span><span class="n">f</span><span class="o">)</span>
<span class="o">}</span>

<span class="n">println</span><span class="o">(</span><span class="s">"AST: "</span> <span class="o">+</span> <span class="n">comp</span><span class="o">(</span><span class="mi">10</span><span class="o">).</span><span class="n">expr</span><span class="o">().</span><span class="n">tree</span><span class="o">)</span>
</pre></div>
</li>
<li><p><em><a href="https://github.com/ochafik/Scalaxy/tree/master/Debug">Debug</a></em> (<a href="http://ochafik.github.io/Scalaxy/Debug/latest/api/index.html">ScalaDoc</a>) provides <code>assert</code>, <code>require</code> and <code>assume</code> macros that automatically add a useful message to the regular <a href="http://www.scala-lang.org/api/current/index.html#scala.Predef%24">Predef</a> calls.</p></li>
<li>
<p><em><a href="https://github.com/ochafik/Scalaxy/tree/master/MacroExtensions">MacroExtensions</a></em> (<a href="http://ochafik.github.io/Scalaxy/MacroExtensions/latest/api/index.html">ScalaDoc</a>) provides an extremely simple (and <em>experimental</em>) syntax to define extensions methods as macros:</p>

<div class="highlight"><pre><span class="nd">@scalaxy</span><span class="o">.</span><span class="n">extension</span><span class="o">[</span><span class="kt">Any</span><span class="o">]</span> 
<span class="k">def</span> <span class="n">quoted</span><span class="o">(</span><span class="n">quote</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> 
  <span class="n">quote</span> <span class="o">+</span> <span class="n">self</span> <span class="o">+</span> <span class="n">quote</span>

<span class="nd">@scalaxy</span><span class="o">.</span><span class="n">extension</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> 
<span class="k">def</span> <span class="n">copiesOf</span><span class="o">[</span><span class="kt">T</span> <span class="kt">:</span> <span class="kt">ClassTag</span><span class="o">](</span><span class="n">generator</span><span class="k">:</span> <span class="o">=&gt;</span> <span class="n">T</span><span class="o">)</span><span class="k">:</span> <span class="kt">Array</span><span class="o">[</span><span class="kt">T</span><span class="o">]</span> <span class="k">=</span> 
  <span class="nc">Array</span><span class="o">.</span><span class="n">fill</span><span class="o">[</span><span class="kt">T</span><span class="o">](</span><span class="n">self</span><span class="o">)(</span><span class="n">generator</span><span class="o">)</span>

<span class="o">...</span>
<span class="n">println</span><span class="o">(</span><span class="mf">10.</span><span class="n">quoted</span><span class="o">(</span><span class="s">"'"</span><span class="o">))</span>
<span class="c1">// macro-expanded to `"'" + 10 + "'"`</span>

<span class="n">println</span><span class="o">(</span><span class="mi">10</span> <span class="n">copiesOf</span> <span class="k">new</span> <span class="nc">Entity</span><span class="o">)</span>
<span class="c1">// macro-expanded to `Array.fill(3)(new Entity)`</span>
</pre></div>
</li>
<li><p><em><a href="https://github.com/ochafik/Scalaxy/tree/master/Compilets">Compilets</a></em> (<a href="http://ochafik.github.io/Scalaxy/Compilets/latest/api/index.html">ScalaDoc</a>) provide an easy way to express AST rewrites, backed by a compiler plugin and an sbt plugin.</p></li>
<li>
<p><em><a href="https://github.com/ochafik/Scalaxy/tree/master/Beans">Beans</a></em> (<a href="http://ochafik.github.io/Scalaxy/Beans/latest/api/index.html">ScalaDoc</a>) are a nifty combination of Dynamics and macros that provide a type-safe eye-candy syntax to set fields of regular Java Beans in a Scala way (without any runtime dependency at all!):</p>

<div class="highlight"><pre><span class="k">import</span> <span class="nn">scalaxy.beans._</span>

<span class="k">new</span> <span class="nc">MyBean</span><span class="o">().</span><span class="n">set</span><span class="o">(</span><span class="n">foo</span> <span class="k">=</span> <span class="mi">10</span><span class="o">,</span> <span class="n">bar</span> <span class="k">=</span> <span class="mi">12</span><span class="o">)</span>
</pre></div>
</li>
<li>
<p><em><a href="https://github.com/ochafik/Scalaxy/tree/master/Fx">Fx</a></em> (<a href="http://ochafik.github.io/Scalaxy/Fx/latest/api/index.html">ScalaDoc</a>) contains an experimental JavaFX DSL (with virtually no runtime dependency) that makes it easy to build objects and define event handlers:</p>

<div class="highlight"><pre><span class="k">new</span> <span class="nc">Button</span><span class="o">().</span><span class="n">set</span><span class="o">(</span>
  <span class="n">text</span> <span class="k">=</span> <span class="n">bind</span> <span class="o">{</span>
    <span class="n">s</span><span class="s">"Hello, ${textField.getText}"</span>
  <span class="o">},</span>
  <span class="n">onAction</span> <span class="k">=</span> <span class="o">{</span>
    <span class="n">println</span><span class="o">(</span><span class="s">"Hello World!"</span><span class="o">)</span>
  <span class="o">}</span>
<span class="o">)</span>
</pre></div>
</li>
</ul><h1>
<a name="discuss" class="anchor" href="#discuss"><span class="octicon octicon-link"></span></a>Discuss</h1>

<p>If you have suggestions / questions:</p>

<ul>
<li><a href="http://twitter.com/ochafik">@ochafik on Twitter</a></li>
<li><a href="groups.google.com/group/nativelibs4java">NativeLibs4Java mailing-list</a></li>
</ul><p>You can also <a href="https://github.com/ochafik/Scalaxy/issues/new">file bugs and enhancement requests here</a>.</p>

<p>Any help (testing, patches, bug reports) will be greatly appreciated!</p>

<h1>
<a name="hacking" class="anchor" href="#hacking"><span class="octicon octicon-link"></span></a>Hacking</h1>

<ul>
<li>
<p>Pushing the site with each sub-project's Scaladoc at <a href="http://ochafik.github.io/Scalaxy/">http://ochafik.github.io/Scalaxy/</a>:</p>

<pre><code>sbt clean
sbt "project scalaxy-doc" ghpages-push-site
</code></pre>

<p>(you can preview the site with <code>sbt "project scalaxy-doc" preview-site</code>)</p>
</li>
<li>
<p>Publishing projects on Sonatype OSS Repository + advertise on ls.implicit.ly (assuming correct credentials in <code>~/.sbt/0.12.4/sonatype.sbt</code>):</p>

<pre><code>sbt "+ assembly" "+ publish"
sbt "project scalaxy" ls-write-version lsync
</code></pre>
</li>
</ul>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Scalaxy maintained by <a href="https://github.com/ochafik">ochafik</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
